(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[83],{102:function(e,t,l){Promise.resolve().then(l.bind(l,7574))},7574:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return eD}});var a=l(7437),s=l(2265),n=l(6463),r=l(3681),i=l(6972);function o(e){let{onSubmit:t,disabled:l}=e,[n,r]=(0,s.useState)(""),[i,o]=(0,s.useState)(!1);return(0,a.jsxs)("form",{className:"rounded-2xl bg-white p-4 shadow-cardSoft",onSubmit:async e=>{e.preventDefault();let a=n.trim();if(a&&!i&&!l){o(!0);try{await t(a),r("")}finally{o(!1)}}},children:[(0,a.jsx)("textarea",{value:n,onChange:e=>r(e.target.value),placeholder:"コメントを入力",rows:3,className:"w-full resize-none rounded-xl border border-slate-200 bg-slate-50 p-3 text-sm text-slate-900 outline-none transition focus:border-slate-400"}),(0,a.jsx)("div",{className:"mt-3 flex justify-end",children:(0,a.jsx)("button",{type:"submit",disabled:i||l,className:"rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white transition hover:bg-slate-800 disabled:cursor-not-allowed disabled:bg-slate-400",children:"投稿"})})]})}var d=l(7003);function c(e){let{comments:t,onDelete:l}=e;return 0===t.length?(0,a.jsx)("div",{className:"rounded-2xl bg-white p-4 text-sm text-slate-500 shadow-cardSoft",children:"まだコメントがありません。"}):(0,a.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,a.jsx)("div",{className:"rounded-2xl bg-white p-4 shadow-cardSoft",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm text-slate-900",children:e.text}),(0,a.jsxs)("div",{className:"text-xs text-slate-500",children:[e.authorName?"".concat(e.authorName," ・ "):"",(0,d.o0)(e.createdAt)]})]}),(0,a.jsx)("button",{type:"button","aria-label":"コメントを削除",className:"rounded-full p-2 text-slate-400 transition hover:bg-slate-100 hover:text-slate-600",onClick:()=>{window.confirm("このコメントを削除しますか？")&&l(e.id)},children:(0,a.jsx)("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9v9.75m4.5-9v9.75M4.5 6.75h15m-13.5 0 1.2-2.1a1.5 1.5 0 0 1 1.3-.75h5.4a1.5 1.5 0 0 1 1.3.75l1.2 2.1m-12.9 0h12.9"})})})]})},e.id))})}var u=l(7540);let m=["name","title","type"],x=["type","category","kind","mode"],v=["新幹線","飛行機","車","船","バス","特急","在来線"],h={新幹線:{serviceLabel:"列車名",serviceKeys:["trainName","lineName","serviceName"],seatLabel:"座席番号",seatKeys:["seatNumber","seat","seatNo"],icon:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})},特急:{serviceLabel:"列車名",serviceKeys:["trainName","lineName","serviceName"],seatLabel:"座席番号",seatKeys:["seatNumber","seat","seatNo"],icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})})},在来線:{serviceLabel:"列車名",serviceKeys:["trainName","lineName","serviceName"],icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})},飛行機:{serviceLabel:"便番号",serviceKeys:["flightNumber","flightNo","serviceName"],seatLabel:"座席番号",seatKeys:["seatNumber","seat","seatNo"],icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})},バス:{serviceLabel:"便名",serviceKeys:["busName","serviceName"],icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})},船:{serviceLabel:"便名",serviceKeys:["shipName","ferryName","serviceName"],seatLabel:"座席/部屋",seatKeys:["seatNumber","cabin","room"],icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"})})},車:{icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}};h["新幹線"].icon=(0,a.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"m 4,14 c 1,-4 3,-5 6,-5 1,0 2,0 2,2 l 1,2 h 6 c 2,1 3,2 3,4 v 4 H 6 V 19 l -2,-2 z M 4,17 h 4"}),(0,a.jsx)("circle",{cx:"8",cy:"19",r:"1.5"}),(0,a.jsx)("circle",{cx:"18",cy:"19",r:"1.5"}),(0,a.jsx)("path",{d:"M 6.5,14 H 14"})]}),h["特急"].icon=(0,a.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("rect",{x:"4",y:"3",width:"16",height:"16",rx:"2"}),(0,a.jsx)("path",{d:"M4 11h16M12 3v8m4-8v8m-8-8v8M8 19v3M16 19v3"}),(0,a.jsx)("path",{d:"m 9,7 6,0"})]}),h["在来線"].icon=(0,a.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("rect",{x:"4",y:"3",width:"16",height:"16",rx:"2"}),(0,a.jsx)("path",{d:"M4 11h16M12 3v8m4-8v8m-8-8v8M8 19v3M16 19v3"})]}),h["飛行機"].icon=(0,a.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M2 12h20M2 12l5-5m-5 5l5 5",style:{display:"none"}}),(0,a.jsx)("path",{d:"M21 14l-4 4H5l6-9H8L3 14v4l9-3 9-4z",style:{display:"none"}}),(0,a.jsx)("path",{d:"M2 12h20",style:{display:"none"}}),(0,a.jsx)("path",{d:"M20 12v3l-7-4-6 4 1-5-3-3h11l4 5z"})]}),h["バス"].icon=(0,a.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("rect",{x:"3",y:"3",width:"18",height:"15",rx:"2"}),(0,a.jsx)("path",{d:"M5 18v3"}),(0,a.jsx)("path",{d:"M19 18v3"}),(0,a.jsx)("path",{d:"M3 11h18"}),(0,a.jsx)("path",{d:"M3 15h18"})]}),h["船"].icon=(0,a.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M2 21h20M22 21v-2c0-.6-.4-1.2-1-1.2h-1c-1.7 0-3.3-1.4-3.3-3.1V6a2 2 0 0 0-2-2H9.3a2 2 0 0 0-2 2v8.7c0 1.7-1.6 3.1-3.3 3.1H3c-.6 0-1 .6-1 1.2v2"}),(0,a.jsx)("path",{d:"M9 10h6M12 6v10"})]}),h["車"].icon=(0,a.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2"}),(0,a.jsx)("circle",{cx:"7",cy:"17",r:"2"}),(0,a.jsx)("circle",{cx:"17",cy:"17",r:"2"})]});let p=["from","departure","origin","start","startPlace","startLocation","fromPlace","departurePlace","departPlace","originPlace","fromLocation","departureLocation","fromCity","originCity","fromAirport","fromStation"],f=["departure","depart","origin","start","from"],b=["to","arrival","destination","end","endPlace","endLocation","toPlace","arrivalPlace","arrivePlace","destinationPlace","toLocation","arrivalLocation","toCity","destinationCity","toAirport","toStation"],j=["arrival","arrive","destination","dest","end"],g=["price","amount","cost","fee","fare","total"],N=["isPaid","paid","isPaymentDone","paymentDone","isSettled"],y=["departureTime","depTime","startTime","departAt","departureDate","departDate"],w=["arrivalTime","arrTime","endTime","arriveAt","arrivalDate","arriveDate"],k=["station","name","title"],T=["departureTime","depTime","departAt"],C=["arrivalTime","arrTime","arriveAt"],S=["name","title"],L=["price","amount","cost","fee","total"],A=["checkIn","checkInDate","startDate"],D=["checkOut","checkOutDate","endDate"],M=["name","title","activity"],K=["date","startDate","time"],I=["price","amount","cost","fee","fare","total"],H=["name","title","item"],O=["checked","isChecked","done","packed"],P=["notes","memo","detail"],B=["url","link","bookingUrl","bookingLink","reservationUrl","reservationLink","website","ticketUrl","ticketLink"];function R(e){return e.reduce((e,t)=>{if("number"==typeof t)return e+t;if(t&&"object"==typeof t&&"amount"in t){let l=t.amount;return e+("number"==typeof l?l:0)}return e},0)}function U(e,t){for(let l of t){let t=e[l];if("string"==typeof t&&t.trim())return t}return""}function E(e,t){for(let l of t){let t=e[l];if("string"==typeof t&&t.trim())return t;if(t&&"object"==typeof t){let e=U(t,["name","title","label","address","city","airport","station","place"]);if(e)return e}}return""}function W(e,t){for(let[l,a]of Object.entries(e)){let e=l.toLowerCase();if(t.some(t=>e.includes(t))){if("string"==typeof a&&a.trim())return a;if(a&&"object"==typeof a){let e=U(a,["name","title","label","address","city","airport","station","place"]);if(e)return e}}}return""}function F(e,t){for(let l of t){let t=e[l];if("number"==typeof t)return t;if("string"==typeof t){let e=Number(t);if(!Number.isNaN(e))return e}}return null}function J(e,t){for(let l of t){let t=e[l];if("boolean"==typeof t)return t;if("string"==typeof t){if("true"===t)return!0;if("false"===t)return!1}}return null}function Y(e,t){for(let l of t){let t=e[l];if(t)return t}return null}function _(e){return e&&(0,d.o0)(e)||""}function z(e){if(!e)return"";let t=e.match(/\b(\d{4})[\/.-](\d{1,2})[\/.-](\d{1,2})\b/);if(!t)return"";let[,l,a,s]=t;return"".concat(l,"-").concat(a.padStart(2,"0"),"-").concat(s.padStart(2,"0"))}function G(e){if(!e)return"";let t=e.match(/\b(\d{1,2}):(\d{1,2})(?::\d{2})?\b/);if(!t)return"";let[,l,a]=t;return"".concat(l.padStart(2,"0"),":").concat(a.padStart(2,"0"))}function V(e,t,l){return function(e,t){let l=e.trim(),a=t.trim();return l&&a?"".concat(l," ").concat(a):l||a||""}(void 0!==t?t:z(e),void 0!==l?l:G(e))}function X(e){if(!e)return null;let t=z(e);if(!t)return null;let l=G(e)||"00:00",a=Date.parse("".concat(t,"T").concat(l,":00"));return Number.isNaN(a)?null:a}function Z(e){let t=e.map((e,t)=>{var l;let a=e.transfers.map((e,t)=>{var l;return{draft:e,index:t,time:null!==(l=X(e.arrTime.value))&&void 0!==l?l:X(e.depTime.value)}}).sort((e,t)=>null===e.time&&null===t.time?e.index-t.index:null===e.time?1:null===t.time?-1:e.time!==t.time?e.time-t.time:e.index-t.index).map(e=>e.draft);return{draft:a===e.transfers?e:{...e,transfers:a},index:t,time:null!==(l=X(e.depTime.value))&&void 0!==l?l:X(e.arrTime.value)}}).sort((e,t)=>null===e.time&&null===t.time?e.index-t.index:null===e.time?1:null===t.time?-1:e.time!==t.time?e.time-t.time:e.index-t.index).map(e=>e.draft);return t.some((t,l)=>t.id!==e[l].id)||t.some((t,l)=>t!==e[l])?t:e}let Q={HND:"羽田空港",NRT:"成田国際空港",KIX:"関西国際空港",ITM:"大阪国際空港",NGO:"中部国際空港",CTS:"新千歳空港",FUK:"福岡空港",OKA:"那覇空港",SDJ:"仙台空港",HIJ:"広島空港",KOJ:"鹿児島空港",KMJ:"熊本空港",KMI:"宮崎空港",OIT:"大分空港",NGS:"長崎空港",HSG:"佐賀空港",KKJ:"北九州空港",UBJ:"山口宇部空港",KMQ:"小松空港",KIJ:"新潟空港",OKJ:"岡山空港",TKS:"徳島空港",TAK:"高松空港",MYJ:"松山空港",KCZ:"高知空港",AOJ:"青森空港",AXT:"秋田空港",HNA:"花巻空港",MMB:"女満別空港",OBO:"帯広空港",KUH:"釧路空港",WKJ:"稚内空港",OKD:"札幌丘珠空港",HKD:"函館空港",UKB:"神戸空港",ISG:"石垣空港",MMY:"宮古空港",ASJ:"奄美空港",TKN:"徳之島空港",UEO:"久米島空港",OGN:"与那国空港",RNJ:"与論空港",RIS:"利尻空港",FUJ:"福江空港",TSJ:"対馬空港",IKI:"壱岐空港",ICN:"仁川国際空港",GMP:"金浦国際空港",PEK:"北京首都国際空港",PKX:"北京大興国際空港",PVG:"上海浦東国際空港",SHA:"上海虹橋国際空港",HKG:"香港国際空港",TPE:"台湾桃園国際空港",TSA:"台北松山空港",SIN:"シンガポール・チャンギ空港",BKK:"スワンナプーム国際空港",DMK:"ドンムアン空港",KUL:"クアラルンプール国際空港",CGK:"スカルノ・ハッタ国際空港",MNL:"ニノイ・アキノ国際空港",HAN:"ノイバイ国際空港",SGN:"タンソンニャット国際空港",DPS:"ングラ・ライ国際空港",DEL:"インディラ・ガンディー国際空港",BOM:"チャトラパティ・シヴァージー国際空港",BLR:"ケンペゴウダ国際空港",HYD:"ラジーヴ・ガンディー国際空港",DXB:"ドバイ国際空港",AUH:"アブダビ国際空港",DOH:"ハマド国際空港",JED:"キング・アブドゥルアズィーズ国際空港",RUH:"キング・ハーリド国際空港",LHR:"ロンドン・ヒースロー空港",LGW:"ロンドン・ガトウィック空港",CDG:"パリ＝シャルル・ド・ゴール空港",ORY:"パリ＝オルリー空港",AMS:"アムステルダム・スキポール空港",FRA:"フランクフルト空港",MUC:"ミュンヘン空港",ZRH:"チューリッヒ空港",VIE:"ウィーン国際空港",MAD:"マドリード＝バラハス空港",BCN:"バルセロナ＝エル・プラット空港",FCO:"ローマ・フィウミチーノ空港",MXP:"ミラノ・マルペンサ空港",DUB:"ダブリン空港",ARN:"ストックホルム・アーランダ空港",CPH:"コペンハーゲン空港",OSL:"オスロ・ガーデモエン空港",HEL:"ヘルシンキ・ヴァンター空港",IST:"イスタンブール空港",SAW:"サビハ・ギョクチェン国際空港",YYZ:"トロント・ピアソン国際空港",YVR:"バンクーバー国際空港",YUL:"モントリオール・トルドー国際空港",JFK:"ジョン・F・ケネディ国際空港",EWR:"ニューアーク・リバティ国際空港",LGA:"ラガーディア空港",ORD:"シカゴ・オヘア国際空港",ATL:"ハーツフィールド・ジャクソン・アトランタ国際空港",DFW:"ダラス・フォートワース国際空港",DEN:"デンバー国際空港",SEA:"シアトル・タコマ国際空港",SFO:"サンフランシスコ国際空港",LAX:"ロサンゼルス国際空港",LAS:"ハリー・リード国際空港",PHX:"フェニックス・スカイハーバー国際空港",MIA:"マイアミ国際空港",IAD:"ワシントン・ダレス国際空港",IAH:"ジョージ・ブッシュ・インターコンチネンタル空港",BOS:"ローガン国際空港",SYD:"シドニー国際空港",MEL:"メルボルン空港",BNE:"ブリスベン空港",AKL:"オークランド国際空港"},q={Tokyo:{code:"HND",name:"羽田空港"},東京:{code:"HND",name:"羽田空港"},Osaka:{code:"KIX",name:"関西国際空港"},大阪:{code:"KIX",name:"関西国際空港"},Sapporo:{code:"CTS",name:"新千歳空港"},札幌:{code:"CTS",name:"新千歳空港"},Seoul:{code:"ICN",name:"仁川国際空港"},Incheon:{code:"ICN",name:"仁川国際空港"},ソウル:{code:"ICN",name:"仁川国際空港"},仁川:{code:"ICN",name:"仁川国際空港"},London:{code:"LHR",name:"ロンドン・ヒースロー空港"},Paris:{code:"CDG",name:"パリ＝シャルル・ド・ゴール空港"},Amsterdam:{code:"AMS",name:"アムステルダム・スキポール空港"},Frankfurt:{code:"FRA",name:"フランクフルト空港"},Munich:{code:"MUC",name:"ミュンヘン空港"},Zurich:{code:"ZRH",name:"チューリッヒ空港"},Vienna:{code:"VIE",name:"ウィーン国際空港"},Madrid:{code:"MAD",name:"マドリード＝バラハス空港"},Barcelona:{code:"BCN",name:"バルセロナ＝エル・プラット空港"},Rome:{code:"FCO",name:"ローマ・フィウミチーノ空港"},Milan:{code:"MXP",name:"ミラノ・マルペンサ空港"},Dublin:{code:"DUB",name:"ダブリン空港"},Stockholm:{code:"ARN",name:"ストックホルム・アーランダ空港"},Copenhagen:{code:"CPH",name:"コペンハーゲン空港"},Oslo:{code:"OSL",name:"オスロ・ガーデモエン空港"},Helsinki:{code:"HEL",name:"ヘルシンキ・ヴァンター空港"},Istanbul:{code:"IST",name:"イスタンブール空港"},Toronto:{code:"YYZ",name:"トロント・ピアソン国際空港"},Vancouver:{code:"YVR",name:"バンクーバー国際空港"},Montreal:{code:"YUL",name:"モントリオール・トルドー国際空港"},"New York":{code:"JFK",name:"ジョン・F・ケネディ国際空港"},"Los Angeles":{code:"LAX",name:"ロサンゼルス国際空港"},"San Francisco":{code:"SFO",name:"サンフランシスコ国際空港"},Seattle:{code:"SEA",name:"シアトル・タコマ国際空港"},Chicago:{code:"ORD",name:"シカゴ・オヘア国際空港"},Atlanta:{code:"ATL",name:"ハーツフィールド・ジャクソン・アトランタ国際空港"},Dallas:{code:"DFW",name:"ダラス・フォートワース国際空港"},Denver:{code:"DEN",name:"デンバー国際空港"},Miami:{code:"MIA",name:"マイアミ国際空港"},Washington:{code:"IAD",name:"ワシントン・ダレス国際空港"},Boston:{code:"BOS",name:"ローガン国際空港"},Sydney:{code:"SYD",name:"シドニー国際空港"},Melbourne:{code:"MEL",name:"メルボルン空港"},Brisbane:{code:"BNE",name:"ブリスベン空港"},Auckland:{code:"AKL",name:"オークランド国際空港"},Beijing:{code:"PEK",name:"北京首都国際空港"},Shanghai:{code:"PVG",name:"上海浦東国際空港"},"Hong Kong":{code:"HKG",name:"香港国際空港"},Taipei:{code:"TPE",name:"台湾桃園国際空港"},Singapore:{code:"SIN",name:"シンガポール・チャンギ空港"},Bangkok:{code:"BKK",name:"スワンナプーム国際空港"},Manila:{code:"MNL",name:"ニノイ・アキノ国際空港"},Delhi:{code:"DEL",name:"インディラ・ガンディー国際空港"},Mumbai:{code:"BOM",name:"チャトラパティ・シヴァージー国際空港"},Dubai:{code:"DXB",name:"ドバイ国際空港"},Doha:{code:"DOH",name:"ハマド国際空港"}},$={TYO:{code:"HND",name:"羽田空港"},OSA:{code:"KIX",name:"関西国際空港"},NYC:{code:"JFK",name:"ジョン・F・ケネディ国際空港"},LON:{code:"LHR",name:"ロンドン・ヒースロー空港"},PAR:{code:"CDG",name:"パリ＝シャルル・ド・ゴール空港"}};function ee(e){for(let t of e)if("string"==typeof t){let e=t.trim();if(e)return e}return""}function et(e){let t=e.match(/\b([A-Z0-9]{3})\b/);return t?t[1].toUpperCase():""}function el(e){if(!e)return"";let t="",l="";if("string"==typeof e){let a=e.trim();if(!a)return"";(l=et(a))&&a.toUpperCase()===l||(t=a)}if("object"==typeof e){let a=e.airport&&"object"==typeof e.airport?e.airport:null;t=ee([null==a?void 0:a.name,null==a?void 0:a.airportName,e.name,e.airportName,e.fullName,e.shortName,e.municipalityName,e.city,e.locationName,e.airport]),l=ee([null==a?void 0:a.iata,null==a?void 0:a.iataCode,null==a?void 0:a.code,e.iata,e.iataCode,e.code,null==a?void 0:a.icao,e.icao,e.airportCode,e.airportIata,e.airportIataCode,e.airportIcao]).toUpperCase()}if(!l&&t&&(l=et(t)),!l&&!t)return"";let a=function(e,t){if(e){var l;let t=null!==(l=q[e])&&void 0!==l?l:q[e.trim()];if(t)return t}if(t){let e=$[t];if(e)return e}return null}(t,l),s=l?Q[l]:"",n=(null==a?void 0:a.name)||s||t,r=(null==a?void 0:a.code)||l;return n&&r?"".concat(n," (").concat(r,")"):n||r}function ea(e){for(let t of e){let e=function e(t){if(!t)return"";if("string"==typeof t)return t.trim();if(t instanceof Date)return t.toISOString();if("number"==typeof t){let e=new Date(t);return Number.isNaN(e.getTime())?"":e.toISOString()}if("object"==typeof t){let l=ee([t.local,t.localTime,t.scheduledTimeLocal,t.scheduledTime,t.scheduledTimeUtc,t.utc,t.time,t.timeLocal,t.timeUtc,t.dateTime,t.dateTimeLocal,t.dateTimeUtc]);if(l)return l;let a=e(t.local)||e(t.utc)||e(t.scheduledTimeLocal)||e(t.scheduledTimeUtc)||e(t.time);if(a)return a}return""}(t);if(e)return e}return""}function es(e,t){var l;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let l of t)if(l in e)return l;if(a.length>0)for(let t of Object.keys(e)){let e=t.toLowerCase();if(a.some(t=>e.includes(t)))return t}return null!==(l=t[0])&&void 0!==l?l:""}function en(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=es(e,t,l),s=a?U(e,[a]):"";return{key:a,value:s,original:s}}function er(e){var t;return null!==(t=h[e])&&void 0!==t?t:h["新幹線"]}function ei(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=es(e,t,l),s=a?E(e,[a]):"";return!s&&l.length>0&&(s=W(e,l)),{key:a,value:s,original:s}}function eo(){return"undefined"!=typeof crypto&&"randomUUID"in crypto?crypto.randomUUID():"id-".concat(Date.now(),"-").concat(Math.random().toString(16).slice(2))}function ed(e){return e.map(e=>{let t=e&&"object"==typeof e?e:{},l="string"==typeof t.id?t.id:"";return{raw:t,id:l.trim()?l:eo(),station:en(t,k),depTime:ec(t,T),arrTime:ec(t,C)}})}function ec(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=es(e,t,l),s="";return!a||(s=_(Y(e,[a])))||(s=U(e,[a])),{key:a,value:s,original:s}}function eu(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=es(e,t,l),s=a?F(e,[a]):null,n="number"==typeof s?String(s):"";return{key:a,value:n,original:n}}function em(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=es(e,t,l),s=a?J(e,[a]):null;return{key:a,value:s,original:s}}function ex(e){return e.map(e=>{var t,l;let a=e&&"object"==typeof e?e:{},s="string"==typeof a.id?a.id:"",n=s.trim()?s:eo(),r=function(e){let t=es(e,x),l=t?U(e,[t]):"",a=v.includes(l)?l:"新幹線";return{key:t||x[0],value:a,original:a}}(a),i=er(r.value),o=null!==(t=i.serviceKeys)&&void 0!==t?t:[],d=null!==(l=i.seatKeys)&&void 0!==l?l:[],c=Array.isArray(a.transfers)?a.transfers:[];return{raw:a,id:n,mode:r,name:en(a,m),serviceName:o.length?en(a,o):{key:"",value:"",original:""},seatNumber:d.length?en(a,d):{key:"",value:"",original:""},from:ei(a,p,f),to:ei(a,b,j),depTime:ec(a,y),arrTime:ec(a,w),price:eu(a,g),paid:em(a,N),notes:en(a,P),transfers:ed(c)}})}function ev(e){return e.map(e=>{let t=e&&"object"==typeof e?e:{};return{raw:t,name:en(t,S),price:eu(t,L),checkIn:ec(t,A),checkOut:ec(t,D),notes:en(t,P),link:en(t,B)}})}function eh(e){return e.map(e=>{let t=e&&"object"==typeof e?e:{};return{raw:t,title:en(t,M),date:ec(t,K),notes:en(t,P),link:en(t,B)}})}function ep(e){return e.map(e=>{let t="string"==typeof e,l=t?{name:e}:e,a=l&&"object"==typeof l?l:{};return{raw:e,isString:t,name:en(a,H),checked:em(a,O)}})}function ef(e){return e.map(e=>{let t="number"==typeof e?e:"number"==typeof e.amount?e.amount:null,l="number"==typeof t?String(t):"";return{raw:e,value:l,original:l,isObject:"object"==typeof e&&null!==e}})}function eb(e){let t=e.trim();return!!t&&Number.isNaN(Number(t))}function ej(e){let t=e.trim();if(!t)return null;let l=Number(t);return Number.isNaN(l)?null:l}function eg(e,t){t.key&&t.value!==t.original&&(e[t.key]=t.value.trim())}function eN(e,t){t.key&&t.value!==t.original&&(e[t.key]=ej(t.value))}function ey(e,t){t.key&&t.value!==t.original&&(e[t.key]=t.value)}function ew(e){let{label:t,value:l}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4 py-3 text-sm",children:[(0,a.jsx)("span",{className:"font-medium text-slate-500",children:t}),(0,a.jsx)("span",{className:"text-right text-base font-semibold text-slate-900",children:l&&l.length>0?l:"—"})]})}function ek(e){let{title:t}=e;return(0,a.jsx)("h3",{className:"text-sm font-semibold tracking-wide text-slate-500",children:t})}function eT(e){let t=function(e){if(!e)return null;if(e instanceof Date)return e;if("string"==typeof e){let t=new Date(e);return Number.isNaN(t.getTime())?null:t}return"object"==typeof e&&"toDate"in e&&"function"==typeof e.toDate?e.toDate():null}(e);return t?t.toISOString().slice(0,10):""}function eC(e){if(!e)return null;let t=new Date("".concat(e,"T00:00:00"));return Number.isNaN(t.getTime())?null:t}function eS(e){let t=e.trim();return t?t.startsWith("http://")||t.startsWith("https://")?t:"https://".concat(t):null}function eL(e){let{enabled:t,onDelete:l,children:n}=e,[r,i]=(0,s.useState)(0),[o,d]=(0,s.useState)(!1),c=(0,s.useRef)(null),u=(0,s.useRef)(!1),m=(0,s.useRef)(!1),x=(0,s.useRef)({x:0,y:0}),v=()=>{if(u.current&&!o){if(u.current=!1,r<=-80){d(!0),i(0),c.current&&window.clearTimeout(c.current),c.current=window.setTimeout(()=>{l()},220);return}i(0)}};return(0,a.jsxs)("div",{className:"relative overflow-hidden rounded-2xl ".concat(o?"pointer-events-none animate-slide-out":""),children:[(0,a.jsx)("div",{className:"pointer-events-none absolute inset-0 rounded-2xl bg-rose-500",style:{opacity:t&&!o?Math.min(1,Math.abs(r)/80):0}}),t?(0,a.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-end pr-6 text-sm font-semibold text-white",children:"削除"}):null,(0,a.jsx)("div",{onPointerDown:e=>{var l;!t||o||(l=e.target)instanceof HTMLElement&&l.closest("input, textarea, select, button, label")||(u.current=!0,m.current=!1,x.current={x:e.clientX,y:e.clientY},e.currentTarget.setPointerCapture(e.pointerId))},onPointerMove:e=>{if(!u.current||!t||o)return;let l=e.clientX-x.current.x,a=e.clientY-x.current.y;if(!m.current){if(6>Math.abs(l))return;if(Math.abs(l)<=Math.abs(a)){u.current=!1;return}m.current=!0}i(Math.max(-120,Math.min(0,l)))},onPointerUp:v,onPointerCancel:v,className:"relative z-10 transition-transform duration-200",style:{transform:"translateX(".concat(r,"px)"),touchAction:"pan-y"},children:n})]})}function eA(e){var t,l,r;let{user:h}=e,k=(0,n.useParams)(),{planPath:Q,planId:q}=function(e){if(!e)return{planPath:null,planId:null};let t=e;try{t=decodeURIComponent(e)}catch(l){t=e}return t.includes("/")?{planPath:t,planId:null}:{planPath:null,planId:t}}("string"==typeof(null==k?void 0:k.id)?k.id:""),[$,ee]=(0,s.useState)(null),[et,es]=(0,s.useState)(null),[en,ei]=(0,s.useState)(!0),[eu,em]=(0,s.useState)([]),[eA,eD]=(0,s.useState)(null),[eM,eK]=(0,s.useState)(null),[eI,eH]=(0,s.useState)(null),[eO,eP]=(0,s.useState)(!1),[eB,eR]=(0,s.useState)("idle"),eU=(0,s.useRef)(null),eE=(0,s.useRef)(null),eW=(0,s.useRef)(null),eF=(0,s.useRef)(!1),[eJ,eY]=(0,s.useState)({name:"",destination:"",memo:"",startDate:"",endDate:"",isPublic:!1}),[e_,ez]=(0,s.useState)([]),[eG,eV]=(0,s.useState)([]),[eX,eZ]=(0,s.useState)([]),[eQ,eq]=(0,s.useState)([]),[e$,e0]=(0,s.useState)([]),[e2,e1]=(0,s.useState)(null),[e5,e4]=(0,s.useState)(null),[e3,e9]=(0,s.useState)(null),e6=e=>{var t,l,a;eY({name:null!==(t=e.name)&&void 0!==t?t:"",destination:null!==(l=e.destination)&&void 0!==l?l:"",memo:null!==(a=e.memo)&&void 0!==a?a:"",startDate:eT(e.startDate),endDate:eT(e.endDate),isPublic:!!e.isPublic});let s=Array.isArray(e.transportations)?e.transportations:[],n=Array.isArray(e.hotels)?e.hotels:[],r=Array.isArray(e.activities)?e.activities:[],i=Array.isArray(e.packingList)?e.packingList:[],o=Array.isArray(e.savingsHistory)?e.savingsHistory:[];ez(Z(ex(s))),eV(ev(n)),eZ(eh(r)),eq(ep(i)),e0(ef(o))},e8=(e,t,l)=>{ez(a=>{let s=a.map((l,a)=>a===e?t(l):l);return(null==l?void 0:l.sort)?Z(s):s})},e7=(e,t,l)=>{ez(a=>{let s=a.map(l=>l.id===e?t(l):l);return(null==l?void 0:l.sort)?Z(s):s})},te=()=>{eE.current&&clearTimeout(eE.current),eE.current=setTimeout(()=>{ez(e=>Z(e))},1)},tt=e=>{let t=e.relatedTarget;t&&e.currentTarget.contains(t)||te()},tl=(e,t)=>{eV(l=>l.map((l,a)=>a===e?t(l):l))},ta=(e,t)=>{eZ(l=>l.map((l,a)=>a===e?t(l):l))},ts=(e,t)=>{eq(l=>l.map((l,a)=>a===e?t(l):l))},tn=(e,t)=>{e0(l=>l.map((l,a)=>a===e?t(l):l))},tr=e=>{ez(t=>Z(t.filter((t,l)=>l!==e)))},ti=e=>{eV(t=>t.filter((t,l)=>l!==e))},to=e=>{eZ(t=>t.filter((t,l)=>l!==e))},td=e=>{eq(t=>t.filter((t,l)=>l!==e))},tc=e=>{e0(t=>t.filter((t,l)=>l!==e))},tu=async e=>{let t=e_.find(t=>t.id===e);if(!t)return;let l=t.serviceName.value.trim();if(!l){e4("便番号を入力してください。"),e9(e);return}let a=z(t.depTime.value)||z(eJ.startDate)||new Date().toISOString().slice(0,10);e1(e),e4(null),e9(null);try{let t=await fetch("/api/aerodatabox?flight=".concat(encodeURIComponent(l),"&date=").concat(encodeURIComponent(a)));if(!t.ok)throw Error("fetch_failed");let s=await t.json(),n=function(e){var t,l,a,s,n,r,i,o,d,c,u,m,x,v;let h=Array.isArray(null==e?void 0:e.data)?e.data[0]:null!==(c=null!==(d=null==e?void 0:null===(l=e.data)||void 0===l?void 0:null===(t=l.flights)||void 0===t?void 0:t[0])&&void 0!==d?d:null==e?void 0:e.data)&&void 0!==c?c:e,p=null!==(m=null!==(u=null==h?void 0:h.departure)&&void 0!==u?u:null==h?void 0:null===(a=h.departures)||void 0===a?void 0:a[0])&&void 0!==m?m:null==h?void 0:h.departureAirport,f=null!==(v=null!==(x=null==h?void 0:h.arrival)&&void 0!==x?x:null==h?void 0:null===(s=h.arrivals)||void 0===s?void 0:s[0])&&void 0!==v?v:null==h?void 0:h.arrivalAirport,b=el(p),j=el(f),g=ea([null==p?void 0:p.scheduledTimeLocal,null==p?void 0:null===(n=p.scheduledTime)||void 0===n?void 0:n.local,null==p?void 0:null===(r=p.scheduledTime)||void 0===r?void 0:r.utc,null==p?void 0:p.scheduledTime,null==p?void 0:p.scheduledTimeUtc,null==p?void 0:p.time,null==h?void 0:h.departureTime,null==h?void 0:h.departureTimeUtc,null==h?void 0:h.departureTimeLocal])||"";return{departureAirport:b,arrivalAirport:j,departureTime:g,arrivalTime:ea([null==f?void 0:f.scheduledTimeLocal,null==f?void 0:null===(i=f.scheduledTime)||void 0===i?void 0:i.local,null==f?void 0:null===(o=f.scheduledTime)||void 0===o?void 0:o.utc,null==f?void 0:f.scheduledTime,null==f?void 0:f.scheduledTimeUtc,null==f?void 0:f.time,null==h?void 0:h.arrivalTime,null==h?void 0:h.arrivalTimeUtc,null==h?void 0:h.arrivalTimeLocal])||""}}(s);if(!n.departureAirport&&!n.arrivalAirport&&!n.departureTime&&!n.arrivalTime){e4("便情報が見つかりませんでした。"),e9(e);return}e7(e,e=>{let t=n.departureTime?G(n.departureTime):"",l=n.arrivalTime?G(n.arrivalTime):"";return{...e,from:{...e.from,value:n.departureAirport||e.from.value},to:{...e.to,value:n.arrivalAirport||e.to.value},depTime:{...e.depTime,value:t?V(e.depTime.value,void 0,t):e.depTime.value},arrTime:{...e.arrTime,value:l?V(e.arrTime.value,void 0,l):e.arrTime.value}}}),te()}catch(t){e4("便情報の取得に失敗しました。"),e9(e),console.error(t)}finally{e1(null)}},tm=()=>{let e={name:eJ.name,destination:eJ.destination,memo:eJ.memo.trim()?eJ.memo.trim():null,startDate:eC(eJ.startDate),endDate:eC(eJ.endDate),totalCost:tb,isPublic:eJ.isPublic};return(e_.length>0||Array.isArray(null==$?void 0:$.transportations))&&(e.transportations=e_.map(e=>{let t={...e.raw,id:e.id};return eg(t,e.mode),eg(t,e.name),eg(t,e.serviceName),eg(t,e.seatNumber),eg(t,e.from),eg(t,e.to),eg(t,e.depTime),eg(t,e.arrTime),eN(t,e.price),ey(t,e.paid),eg(t,e.notes),("在来線"===e.mode.value||Array.isArray(e.raw.transfers))&&(t.transfers=e.transfers.map(e=>{let t={...e.raw,id:e.id};return eg(t,e.station),eg(t,e.depTime),eg(t,e.arrTime),t})),t})),(eG.length>0||Array.isArray(null==$?void 0:$.hotels))&&(e.hotels=eG.map(e=>{let t={...e.raw};return eg(t,e.name),eN(t,e.price),eg(t,e.checkIn),eg(t,e.checkOut),eg(t,e.notes),eg(t,e.link),t})),(eX.length>0||Array.isArray(null==$?void 0:$.activities))&&(e.activities=eX.map(e=>{let t={...e.raw};return eg(t,e.title),eg(t,e.date),eg(t,e.notes),eg(t,e.link),t})),(eQ.length>0||Array.isArray(null==$?void 0:$.packingList))&&(e.packingList=eQ.map(e=>{if(e.isString){var t;let l=e.name.value!==e.name.original;if(!(null!==e.checked.value))return l?e.name.value.trim():e.raw;let a=e.checked.key||"checked";return{[e.name.key||"name"]:e.name.value.trim(),[a]:null!==(t=e.checked.value)&&void 0!==t&&t}}let l={...e.raw};return eg(l,e.name),ey(l,e.checked),l})),(e$.length>0||Array.isArray(null==$?void 0:$.savingsHistory))&&(e.savingsHistory=e$.map(e=>{if(e.value===e.original)return e.raw;let t=ej(e.value);return e.isObject?{...e.raw,amount:null!=t?t:void 0}:null!=t?t:0})),e};(0,s.useEffect)(()=>{let e=!0;if(Q||q)return ei(!0),es(null),(Q?(0,u.oR)(Q):(0,u.Ov)(null!=q?q:"",h.uid)).then(t=>{e&&(ee(t),t||es("プランが見つかりませんでした。"))}).catch(t=>{e&&es("プランの読み込みに失敗しました。"),console.error(t)}).finally(()=>{e&&ei(!1)}),()=>{e=!1}},[q,Q,h.uid]),(0,s.useEffect)(()=>{if($){if(eF.current){eF.current=!1;return}e6($)}},[$]),(0,s.useEffect)(()=>{if(!(null==$?void 0:$.path))return;eD(null);let e=(0,u.Mf)($.path,e=>{em(e)},()=>{eD("コメントの取得に失敗しました。")});return()=>{e()}},[null==$?void 0:$.path]);let tx=null!==(l=null!==(t=h.displayName)&&void 0!==t?t:h.email)&&void 0!==l?l:"ユーザー",tv=Array.isArray(null==$?void 0:$.savingsHistory)&&$.savingsHistory.length>0?R($.savingsHistory):"number"==typeof(null==$?void 0:$.savedAmount)?$.savedAmount:"number"==typeof(null==$?void 0:$.amount)?$.amount:0,th="string"==typeof(null==$?void 0:$.path)&&($.path.startsWith("users/".concat(h.uid,"/travelPlans/"))||$.path.startsWith("Users/".concat(h.uid,"/travelPlans/"))),tp=!!$&&((null==$?void 0:$.userId)===h.uid||(null==$?void 0:$.ownerId)===h.uid||th),tf=!!(null==$?void 0:$.path)&&tp,tb=(0,s.useMemo)(()=>{let e=0;return e_.forEach(t=>{let l=ej(t.price.value);null!==l&&(e+=l)}),eG.forEach(t=>{let l=ej(t.price.value);null!==l&&(e+=l)}),eX.forEach(t=>{let l=F(t.raw,I);null!==l&&(e+=l)}),e},[e_,eG,eX]),tj=tf?tb:"number"==typeof(null==$?void 0:$.totalCost)?$.totalCost:null,tg=null!==tj?Math.max(0,tj-tv):null,tN=Array.isArray(null==$?void 0:$.transportations)?$.transportations:[],ty=Array.isArray(null==$?void 0:$.hotels)?$.hotels:[],tw=Array.isArray(null==$?void 0:$.activities)?$.activities:[],tk=Array.isArray(null==$?void 0:$.packingList)?$.packingList:[],tT=!!eI,tC=function(e){let t=(0,s.useRef)(new Map),l=(0,s.useRef)(new Map),a=(0,s.useRef)(null),n=e.join("|");return(0,s.useLayoutEffect)(()=>{let s=new Map;e.forEach(e=>{let l=t.current.get(e);l&&s.set(e,l.getBoundingClientRect())}),null!==a.current&&a.current!==n&&e.forEach(e=>{let a=t.current.get(e),n=l.current.get(e),r=s.get(e);if(!a||!n||!r)return;let i=n.left-r.left,o=n.top-r.top;(0!==i||0!==o)&&a.animate([{transform:"translate(".concat(i,"px, ").concat(o,"px)")},{transform:"translate(0, 0)"}],{duration:180,easing:"cubic-bezier(0.2, 0, 0, 1)"})}),l.current=s,a.current=n},[n]),e=>l=>{l?t.current.set(e,l):t.current.delete(e)}}(e_.map(e=>e.id)),tS=(0,s.useMemo)(()=>tN.map((e,t)=>({item:e,index:t,time:function(e){var t;let l=ec(e,y).value,a=ec(e,w).value;return null!==(t=X(l))&&void 0!==t?t:X(a)}(e)})).sort((e,t)=>null===e.time&&null===t.time?e.index-t.index:null===e.time?1:null===t.time?-1:e.time!==t.time?e.time-t.time:e.index-t.index).map(e=>e.item),[tN]),tL=$?function(e){if("number"!=typeof e.totalCost)return null;let t=Array.isArray(e.savingsHistory)?R(e.savingsHistory):"number"==typeof e.savedAmount?e.savedAmount:"number"==typeof e.amount?e.amount:0;return{remaining:Math.max(0,e.totalCost-t),percent:e.totalCost>0?Math.min(100,Math.round(t/e.totalCost*100)):0}}({...$,totalCost:"number"==typeof tj?tj:$.totalCost}):null;return(0,s.useEffect)(()=>{eW.current=null,eR("idle")},[null==$?void 0:$.path]),(0,s.useEffect)(()=>{if(!tf||!(null==$?void 0:$.path))return;if(e_.some(e=>eb(e.price.value))||eG.some(e=>eb(e.price.value))||e$.some(e=>eb(e.value))){eR("error"),eH("数値の入力を確認してください。");return}eH(null);let e=tm(),t=JSON.stringify(e);if(null===eW.current){eW.current=t;return}if(eW.current!==t)return eU.current&&clearTimeout(eU.current),eR("saving"),eU.current=setTimeout(()=>{eP(!0),(0,u.Vs)($.path,e).then(()=>{eW.current=t,eF.current=!0,ee(t=>t?{...t,...e}:t),eR("saved")}).catch(e=>{eR("error"),eH("自動保存に失敗しました。"),console.error(e)}).finally(()=>{eP(!1)})},700),()=>{eU.current&&clearTimeout(eU.current)}},[tf,null==$?void 0:$.path,eJ,e_,eG,eX,eQ,e$,tb]),(0,a.jsx)(i.Z,{title:(null==$?void 0:$.name)||"プラン詳細",children:(0,a.jsxs)("div",{className:"space-y-6",children:[et?(0,a.jsx)("div",{className:"rounded-2xl bg-white p-4 text-sm text-rose-500 shadow-cardSoft",children:et}):null,en?(0,a.jsx)("div",{className:"rounded-2xl bg-white p-4 text-sm text-slate-500 shadow-cardSoft",children:"読み込み中..."}):$?(0,a.jsxs)("div",{className:"rounded-2xl bg-white p-5 shadow-cardSoft",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:$.name||"Untitled"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:$.destination||"Destination"})]}),(0,a.jsxs)("div",{className:"text-right text-xs text-slate-500",children:[(0,a.jsx)("span",{className:"block text-base font-semibold text-slate-900",children:"number"==typeof $.commentsCount?$.commentsCount:0}),"コメント"]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[(0,a.jsx)("span",{children:tL?"あと ".concat((0,d._z)(tL.remaining)):"あと —"}),(0,a.jsx)("span",{children:tL?"".concat(tL.percent,"%"):"—"})]}),(0,a.jsx)("div",{className:"mt-2 h-2 rounded-full bg-slate-100",children:(0,a.jsx)("div",{className:"h-2 rounded-full bg-slate-900/80",style:{width:"".concat(tL?tL.percent:0,"%")}})})]})]}):null,$?(0,a.jsxs)("div",{className:"space-y-6",children:[tf?null:(0,a.jsx)("div",{className:"rounded-2xl bg-white p-4 text-xs text-slate-500 shadow-cardSoft",children:"このログは編集できません。ログイン中のUIDと ownerId / userId が一致しているか確認してください。"}),tf?(0,a.jsx)("div",{className:"rounded-2xl bg-white p-4 shadow-cardSoft",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-500",children:["旅行名",(0,a.jsx)("input",{value:eJ.name,onChange:e=>eY(t=>({...t,name:e.target.value})),className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]}),(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-500",children:["目的地",(0,a.jsx)("input",{value:eJ.destination,onChange:e=>eY(t=>({...t,destination:e.target.value})),className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]}),(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-500",children:["メモ",(0,a.jsx)("textarea",{value:eJ.memo,onChange:e=>eY(t=>({...t,memo:e.target.value})),rows:3,className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]}),(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-500",children:["出発日",(0,a.jsx)("input",{type:"date",value:eJ.startDate,onChange:e=>eY(t=>({...t,startDate:e.target.value})),className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]}),(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-500",children:["帰宅日",(0,a.jsx)("input",{type:"date",value:eJ.endDate,onChange:e=>eY(t=>({...t,endDate:e.target.value})),className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-xs font-semibold text-slate-500",children:["合計費用（自動）",(0,a.jsx)("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:(0,d._z)(tb)})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-xs font-semibold text-slate-500",children:[(0,a.jsx)("input",{type:"checkbox",checked:eJ.isPublic,onChange:e=>eY(t=>({...t,isPublic:e.target.checked})),className:"h-4 w-4 rounded border-slate-300"}),"公開する"]}),tT?(0,a.jsx)("div",{className:"rounded-xl bg-rose-50 px-3 py-2 text-xs text-rose-600",children:eI}):null,(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3 text-xs text-slate-500",children:[(0,a.jsx)("span",{children:eO||"saving"===eB?"自動保存中...":"error"===eB?"自動保存エラー":"saved"===eB?"保存済み":"自動保存"}),(0,a.jsx)("button",{type:"button",onClick:()=>{$&&e6($),eH(null)},className:"rounded-full border border-slate-200 bg-white px-4 py-2 text-xs font-semibold text-slate-700",children:"リセット"})]})]})}):null,tf?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(ek,{title:"基本情報"}),(0,a.jsxs)("div",{className:"rounded-2xl bg-white px-4 shadow-cardSoft",children:[(0,a.jsx)(ew,{label:"旅行名",value:$.name}),(0,a.jsx)("div",{className:"h-px bg-slate-100"}),(0,a.jsx)(ew,{label:"目的地",value:$.destination}),(0,a.jsx)("div",{className:"h-px bg-slate-100"}),(0,a.jsx)(ew,{label:"メモ",value:null!==(r=$.memo)&&void 0!==r?r:""})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(ek,{title:"旅行日程"}),(0,a.jsxs)("div",{className:"rounded-2xl bg-white px-4 shadow-cardSoft",children:[(0,a.jsx)(ew,{label:"出発日",value:(0,d.p6)($.startDate)||""}),(0,a.jsx)("div",{className:"h-px bg-slate-100"}),(0,a.jsx)(ew,{label:"帰宅日",value:(0,d.p6)($.endDate)||""})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(ek,{title:"移動手段"}),tf?0===e_.length?(0,a.jsx)("div",{className:"rounded-2xl bg-white p-4 text-sm text-slate-500 shadow-cardSoft",children:"まだ移動手段が登録されていません。"}):(0,a.jsx)("div",{className:"space-y-3",children:e_.map((e,t)=>{let l=z(e.depTime.value),s=G(e.depTime.value),n=z(e.arrTime.value),r=G(e.arrTime.value);return(0,a.jsx)("div",{ref:tC(e.id),className:"will-change-transform",children:(0,a.jsx)(eL,{enabled:tf,onDelete:()=>tr(t),children:(0,a.jsxs)("div",{className:"rounded-2xl bg-white p-4 shadow-cardSoft",onBlur:tt,children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-slate-500",children:"移動手段の種類"}),(0,a.jsx)("div",{className:"mt-3 grid grid-cols-4 gap-2 sm:grid-cols-7",children:v.map(l=>{let s=e.mode.value===l;return(0,a.jsx)("button",{type:"button",onClick:()=>e8(t,e=>{var t,a,s,n;if(e.mode.value===l)return e;let r=er(l),i=null!==(s=null===(t=r.serviceKeys)||void 0===t?void 0:t[0])&&void 0!==s?s:"",o=null!==(n=null===(a=r.seatKeys)||void 0===a?void 0:a[0])&&void 0!==n?n:"",d={...e.raw};return"在来線"!==l&&delete d.transfers,{...e,raw:d,mode:{...e.mode,value:l},serviceName:{key:i,value:"",original:""},seatNumber:{key:o,value:"",original:""},transfers:"在来線"===l?e.transfers:[]}}),className:"flex flex-col items-center justify-center gap-1 rounded-xl py-2 px-3 text-xs font-bold transition-all ".concat(s?"bg-slate-900 text-white shadow-md scale-[1.02]":"bg-slate-50 text-slate-500 hover:bg-slate-100 hover:text-slate-700"),children:l},"".concat(l,"-").concat(t))})})]}),"在来線"===e.mode.value?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-500",children:["金額",(0,a.jsx)("input",{type:"number",inputMode:"numeric",value:e.price.value,onChange:e=>e8(t,t=>({...t,price:{...t.price,value:e.target.value}})),className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]}),(0,a.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-slate-500",children:"乗換駅"}),(0,a.jsxs)("button",{type:"button",onClick:()=>e8(t,e=>({...e,transfers:[...e.transfers,...ed([{id:eo(),station:"",arrivalTime:"",departureTime:""}])]})),className:"flex items-center gap-1 rounded-full bg-blue-50 px-3 py-1.5 text-xs font-bold text-blue-600 transition-colors hover:bg-blue-100",children:[(0,a.jsx)("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"M12 5v14M5 12h14"})}),"乗換を追加"]})]}),0===e.transfers.length?(0,a.jsx)("div",{className:"rounded-xl bg-slate-50 px-3 py-2 text-xs text-slate-500",children:"まだ乗換駅がありません。"}):(0,a.jsx)("div",{className:"space-y-2",children:e.transfers.map((e,l)=>{let s=z(e.arrTime.value),n=G(e.arrTime.value),r=z(e.depTime.value),i=G(e.depTime.value);return(0,a.jsxs)("div",{className:"rounded-xl border border-slate-100 bg-slate-50 p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-xs font-semibold text-slate-500",children:["乗換 ",l+1]}),(0,a.jsx)("button",{type:"button",onClick:()=>e8(t,e=>({...e,transfers:e.transfers.filter((e,t)=>t!==l)})),className:"text-xs font-semibold text-rose-500",children:"削除"})]}),(0,a.jsxs)("div",{className:"mt-2 grid gap-3 md:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-slate-500",children:"駅名"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsxs)("label",{className:"block text-[11px] font-semibold text-transparent select-none",children:["Station",(0,a.jsx)("div",{className:"relative mt-1 text-slate-900",children:(0,a.jsx)("input",{value:e.station.value,onChange:e=>e8(t,t=>({...t,transfers:t.transfers.map((t,a)=>a===l?{...t,station:{...t.station,value:e.target.value}}:t)})),className:"w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 focus:border-slate-400 focus:outline-none focus:ring-4 focus:ring-slate-100 placeholder-transparent"})})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-slate-500",children:"到着時刻"}),(0,a.jsxs)("div",{className:"mt-2 grid gap-2 sm:grid-cols-2",children:[(0,a.jsxs)("label",{className:"block text-[11px] font-semibold text-slate-500",children:["日付",(0,a.jsxs)("div",{className:"relative mt-1",children:[(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:(0,a.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,a.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,a.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,a.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),(0,a.jsx)("input",{type:"date",value:s,onChange:e=>e8(t,t=>({...t,transfers:t.transfers.map((t,a)=>a===l?{...t,arrTime:{...t.arrTime,value:V(t.arrTime.value,e.target.value,void 0)}}:t)}),{sort:!0}),className:"w-full rounded-xl border border-slate-200 bg-white pl-10 pr-3 py-2 text-sm text-slate-900 focus:border-slate-400 focus:outline-none focus:ring-4 focus:ring-slate-100"})]})]}),(0,a.jsxs)("label",{className:"block text-[11px] font-semibold text-slate-500",children:["時刻",(0,a.jsxs)("div",{className:"relative mt-1",children:[(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:(0,a.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("polyline",{points:"12 6 12 12 16 14"})]})}),(0,a.jsx)("input",{type:"time",value:n,onChange:e=>e8(t,t=>({...t,transfers:t.transfers.map((t,a)=>a===l?{...t,arrTime:{...t.arrTime,value:V(t.arrTime.value,void 0,e.target.value)}}:t)}),{sort:!0}),className:"w-full rounded-xl border border-slate-200 bg-white pl-10 pr-3 py-2 text-sm text-slate-900 focus:border-slate-400 focus:outline-none focus:ring-4 focus:ring-slate-100"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-slate-500",children:"出発時刻"}),(0,a.jsxs)("div",{className:"mt-2 grid gap-2 sm:grid-cols-2",children:[(0,a.jsxs)("label",{className:"block text-[11px] font-semibold text-slate-500",children:["日付",(0,a.jsxs)("div",{className:"relative mt-1",children:[(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:(0,a.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,a.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,a.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,a.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),(0,a.jsx)("input",{type:"date",value:r,onChange:e=>e8(t,t=>({...t,transfers:t.transfers.map((t,a)=>a===l?{...t,depTime:{...t.depTime,value:V(t.depTime.value,e.target.value,void 0)}}:t)})),className:"w-full rounded-xl border border-slate-200 bg-white pl-10 pr-3 py-2 text-sm text-slate-900 focus:border-slate-400 focus:outline-none focus:ring-4 focus:ring-slate-100"})]})]}),(0,a.jsxs)("label",{className:"block text-[11px] font-semibold text-slate-500",children:["時刻",(0,a.jsxs)("div",{className:"relative mt-1",children:[(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:(0,a.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("polyline",{points:"12 6 12 12 16 14"})]})}),(0,a.jsx)("input",{type:"time",value:i,onChange:e=>e8(t,t=>({...t,transfers:t.transfers.map((t,a)=>a===l?{...t,depTime:{...t.depTime,value:V(t.depTime.value,void 0,e.target.value)}}:t)})),className:"w-full rounded-xl border border-slate-200 bg-white pl-10 pr-3 py-2 text-sm text-slate-900 focus:border-slate-400 focus:outline-none focus:ring-4 focus:ring-slate-100"})]})]})]})]})]},"".concat(e.id,"-").concat(l))})})]}),(0,a.jsxs)("div",{className:"mt-3 grid gap-3 md:grid-cols-2",children:[(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-500",children:["到着地",(0,a.jsx)("input",{value:e.to.value,onChange:e=>e8(t,t=>({...t,to:{...t.to,value:e.target.value}})),className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]}),(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-500",children:["出発地",(0,a.jsx)("input",{value:e.from.value,onChange:e=>e8(t,t=>({...t,from:{...t.from,value:e.target.value}})),className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]})]})]}):(0,a.jsxs)(a.Fragment,{children:[(()=>{let l=er(e.mode.value),s=!!l.serviceLabel,n=!!l.seatLabel;return s||n?(0,a.jsxs)("div",{className:"mb-3 grid gap-3 md:grid-cols-2",children:[s?(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-500",children:[l.serviceLabel,(0,a.jsxs)("div",{className:"mt-2 flex flex-col gap-2 sm:flex-row sm:items-center",children:[(0,a.jsx)("input",{value:e.serviceName.value,onChange:e=>e8(t,t=>({...t,serviceName:{...t.serviceName,value:e.target.value}})),className:"w-full flex-1 rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"}),"飛行機"===e.mode.value?(0,a.jsx)("button",{type:"button",onClick:()=>tu(e.id),disabled:e2===e.id,className:"rounded-full border border-slate-200 bg-white px-4 py-2 text-xs font-semibold text-slate-600 transition hover:bg-slate-50 disabled:opacity-60",children:e2===e.id?"取得中...":"便情報"}):null]}),(e.mode.value,null),e5&&e3===e.id?(0,a.jsx)("p",{className:"mt-2 text-xs text-rose-500",children:e5}):null]}):null,n?(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-500",children:[l.seatLabel,(0,a.jsx)("input",{value:e.seatNumber.value,onChange:e=>e8(t,t=>({...t,seatNumber:{...t.seatNumber,value:e.target.value}})),className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]}):null]}):null})(),(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-500",children:["移動名",(0,a.jsx)("input",{value:e.name.value,onChange:e=>e8(t,t=>({...t,name:{...t.name,value:e.target.value}})),className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]}),(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-500",children:["金額",(0,a.jsx)("input",{type:"number",inputMode:"numeric",value:e.price.value,onChange:e=>e8(t,t=>({...t,price:{...t.price,value:e.target.value}})),className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]})]}),(0,a.jsxs)("div",{className:"mt-3 grid gap-3 md:grid-cols-2",children:[(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-500",children:["出発地",(0,a.jsx)("input",{value:e.from.value,onChange:e=>e8(t,t=>({...t,from:{...t.from,value:e.target.value}})),className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]}),(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-500",children:["到着地",(0,a.jsx)("input",{value:e.to.value,onChange:e=>e8(t,t=>({...t,to:{...t.to,value:e.target.value}})),className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]})]}),(0,a.jsxs)("div",{className:"mt-3 grid gap-3 md:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-slate-500",children:"出発時刻"}),(0,a.jsxs)("div",{className:"mt-2 grid gap-2 sm:grid-cols-2",children:[(0,a.jsxs)("label",{className:"block text-[11px] font-semibold text-slate-400",children:["日付",(0,a.jsx)("input",{type:"date",value:l,onChange:e=>e8(t,t=>({...t,depTime:{...t.depTime,value:V(t.depTime.value,e.target.value,void 0)}}),{sort:!0}),className:"mt-1 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]}),(0,a.jsxs)("label",{className:"block text-[11px] font-semibold text-slate-400",children:["時刻",(0,a.jsx)("input",{type:"time",value:s,onChange:e=>e8(t,t=>({...t,depTime:{...t.depTime,value:V(t.depTime.value,void 0,e.target.value)}}),{sort:!0}),className:"mt-1 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-slate-500",children:"到着時刻"}),(0,a.jsxs)("div",{className:"mt-2 grid gap-2 sm:grid-cols-2",children:[(0,a.jsxs)("label",{className:"block text-[11px] font-semibold text-slate-400",children:["日付",(0,a.jsx)("input",{type:"date",value:n,onChange:e=>e8(t,t=>({...t,arrTime:{...t.arrTime,value:V(t.arrTime.value,e.target.value,void 0)}}),{sort:!0}),className:"mt-1 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]}),(0,a.jsxs)("label",{className:"block text-[11px] font-semibold text-slate-400",children:["時刻",(0,a.jsx)("input",{type:"time",value:r,onChange:e=>e8(t,t=>({...t,arrTime:{...t.arrTime,value:V(t.arrTime.value,void 0,e.target.value)}}),{sort:!0}),className:"mt-1 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]})]})]})]}),(0,a.jsxs)("label",{className:"mt-3 block text-xs font-semibold text-slate-500",children:["メモ",(0,a.jsx)("textarea",{value:e.notes.value,onChange:e=>e8(t,t=>({...t,notes:{...t.notes,value:e.target.value}})),rows:2,className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]})]}),(0,a.jsxs)("label",{className:"mt-3 flex items-center gap-2 text-xs font-semibold text-slate-500",children:[(0,a.jsx)("input",{type:"checkbox",checked:!0===e.paid.value,onChange:e=>e8(t,t=>({...t,paid:{...t.paid,value:e.target.checked}})),className:"h-4 w-4 rounded border-slate-300"}),"支払い済み"]})]})})},e.id)})}):0===tN.length?(0,a.jsx)("div",{className:"rounded-2xl bg-white p-4 text-sm text-slate-500 shadow-cardSoft",children:"まだ移動手段が登録されていません。"}):(0,a.jsx)("div",{className:"space-y-3",children:tS.map((e,t)=>{var l,s;let n=U(e,m)||"移動 ".concat(t+1),r=U(e,x),i=er(r||"新幹線"),o=i.serviceLabel,c=i.seatLabel,u=o&&(null===(l=i.serviceKeys)||void 0===l?void 0:l.length)?U(e,i.serviceKeys):"",v=c&&(null===(s=i.seatKeys)||void 0===s?void 0:s.length)?U(e,i.seatKeys):"",h=F(e,g),k=J(e,N),S=E(e,p);S||(S=W(e,f));let L=E(e,b);L||(L=W(e,j));let A=_(Y(e,y)),D=_(Y(e,w)),M=Array.isArray(e.transfers)?e.transfers:[],K=U(e,P);return(0,a.jsxs)("div",{className:"rounded-2xl bg-white p-4 shadow-cardSoft",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsx)("h4",{className:"text-base font-semibold text-slate-900",children:n}),null!==h?(0,a.jsx)("span",{className:"text-base font-semibold text-slate-900",children:(0,d._z)(h)}):null]}),r?(0,a.jsx)("p",{className:"mt-2 text-xs font-semibold text-slate-500",children:r}):null,null!==k?(0,a.jsx)("p",{className:"mt-2 text-xs font-semibold text-emerald-600",children:k?"支払い済み":"未払い"}):null,(0,a.jsxs)("div",{className:"mt-3 space-y-1 text-xs text-slate-500",children:[o&&u?(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsxs)("span",{children:[o,": ",u]}),c&&v?(0,a.jsxs)("span",{children:[c,": ",v]}):null]}):c&&v?(0,a.jsx)("div",{className:"flex items-center justify-between gap-4",children:(0,a.jsxs)("span",{children:[c,": ",v]})}):null,(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsxs)("span",{children:["出発地: ",S||"—"]}),(0,a.jsxs)("span",{children:["到着地: ",L||"—"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsxs)("span",{children:["DEP: ",A||"—"]}),(0,a.jsxs)("span",{children:["ARR: ",D||"—"]})]}),"在来線"===r&&M.length>0?(0,a.jsxs)("div",{className:"rounded-xl bg-slate-50 px-3 py-2 text-xs text-slate-500",children:[(0,a.jsx)("p",{className:"font-semibold text-slate-500",children:"乗換駅"}),(0,a.jsx)("div",{className:"mt-2 space-y-1",children:M.map((e,t)=>{let l=U(e,["station","name","title"]),s=_(Y(e,C)),n=_(Y(e,T));return(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,a.jsxs)("span",{children:[t+1,". ",l||"駅名未設定"]}),(0,a.jsxs)("span",{className:"text-slate-400",children:[s||"—"," → ",n||"—"]})]},"transfer-".concat(t))})})]}):null,K?(0,a.jsxs)("p",{children:["メモ: ",K]}):null]})]},"".concat(n,"-").concat(t))})}),tf?(0,a.jsx)("button",{type:"button",onClick:()=>{ez(e=>{var t,l,a,s,n,r,i,o,d;let c=e[0],u=null!==(n=null==c?void 0:c.mode.value)&&void 0!==n?n:"新幹線",v=(null==c?void 0:c.mode.key)||x[0],h=er(u),f=null!==(i=null!==(r=null===(t=h.serviceKeys)||void 0===t?void 0:t.find(e=>e===(null==c?void 0:c.serviceName.key)))&&void 0!==r?r:null===(l=h.serviceKeys)||void 0===l?void 0:l[0])&&void 0!==i?i:"",j=null!==(d=null!==(o=null===(a=h.seatKeys)||void 0===a?void 0:a.find(e=>e===(null==c?void 0:c.seatNumber.key)))&&void 0!==o?o:null===(s=h.seatKeys)||void 0===s?void 0:s[0])&&void 0!==d?d:"",k={[v]:u,[(null==c?void 0:c.name.key)||m[0]]:"",[(null==c?void 0:c.from.key)||p[0]]:"",[(null==c?void 0:c.to.key)||b[0]]:"",[(null==c?void 0:c.depTime.key)||y[0]]:"",[(null==c?void 0:c.arrTime.key)||w[0]]:"",[(null==c?void 0:c.price.key)||g[0]]:null,[(null==c?void 0:c.paid.key)||N[0]]:!1,[(null==c?void 0:c.notes.key)||P[0]]:""};return f&&(k[f]=""),j&&(k[j]=""),"在来線"===u&&(k.transfers=[]),Z([...e,...ex([k])])})},className:"w-full rounded-2xl border border-dashed border-slate-200 bg-white py-3 text-sm font-semibold text-slate-600 shadow-cardSoft transition hover:bg-slate-50",children:"移動手段を追加"}):null]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(ek,{title:"宿泊"}),tf?0===eG.length?(0,a.jsx)("div",{className:"rounded-2xl bg-white p-4 text-sm text-slate-500 shadow-cardSoft",children:"まだ宿泊先が登録されていません。"}):(0,a.jsx)("div",{className:"space-y-3",children:eG.map((e,t)=>(0,a.jsx)(eL,{enabled:tf,onDelete:()=>ti(t),children:(0,a.jsxs)("div",{className:"rounded-2xl bg-white p-4 shadow-cardSoft",children:[(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-500",children:["宿泊名",(0,a.jsx)("input",{value:e.name.value,onChange:e=>tl(t,t=>({...t,name:{...t.name,value:e.target.value}})),className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]}),(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-500",children:["金額",(0,a.jsx)("input",{type:"number",inputMode:"numeric",value:e.price.value,onChange:e=>tl(t,t=>({...t,price:{...t.price,value:e.target.value}})),className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]})]}),(0,a.jsxs)("div",{className:"mt-3 grid gap-3 md:grid-cols-2",children:[(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-500",children:["チェックイン",(0,a.jsx)("input",{value:e.checkIn.value,onChange:e=>tl(t,t=>({...t,checkIn:{...t.checkIn,value:e.target.value}})),placeholder:"例: 2025-11-23 15:00",className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]}),(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-500",children:["チェックアウト",(0,a.jsx)("input",{value:e.checkOut.value,onChange:e=>tl(t,t=>({...t,checkOut:{...t.checkOut,value:e.target.value}})),placeholder:"例: 2025-11-24 10:00",className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]})]}),(0,a.jsxs)("label",{className:"mt-3 block text-xs font-semibold text-slate-500",children:["メモ",(0,a.jsx)("textarea",{value:e.notes.value,onChange:e=>tl(t,t=>({...t,notes:{...t.notes,value:e.target.value}})),rows:2,className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]}),(0,a.jsxs)("label",{className:"mt-3 block text-xs font-semibold text-slate-500",children:["予約リンク",(0,a.jsx)("input",{value:e.link.value,onChange:e=>tl(t,t=>({...t,link:{...t.link,value:e.target.value}})),placeholder:"https://...",className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]})]})},"hotel-edit-".concat(t)))}):0===ty.length?(0,a.jsx)("div",{className:"rounded-2xl bg-white p-4 text-sm text-slate-500 shadow-cardSoft",children:"まだ宿泊先が登録されていません。"}):(0,a.jsx)("div",{className:"space-y-3",children:ty.map((e,t)=>{let l=U(e,S)||"宿泊 ".concat(t+1),s=F(e,L),n=_(Y(e,A)),r=_(Y(e,D)),i=U(e,P),o=U(e,B),c=o?eS(o):null;return(0,a.jsxs)("div",{className:"rounded-2xl bg-white p-4 shadow-cardSoft",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsx)("h4",{className:"text-base font-semibold text-slate-900",children:l}),null!==s?(0,a.jsx)("span",{className:"text-base font-semibold text-slate-900",children:(0,d._z)(s)}):null]}),(0,a.jsxs)("div",{className:"mt-3 space-y-1 text-xs text-slate-500",children:[(n||r)&&(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsxs)("span",{children:["チェックイン: ",n||"—"]}),(0,a.jsxs)("span",{children:["チェックアウト: ",r||"—"]})]}),i?(0,a.jsxs)("p",{children:["メモ: ",i]}):null,c?(0,a.jsx)("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"text-slate-900 underline underline-offset-4",children:"予約リンクを開く"}):null]})]},"".concat(l,"-").concat(t))})}),tf?(0,a.jsx)("button",{type:"button",onClick:()=>{eV(e=>{let t=e[0];return[...e,...ev([{[(null==t?void 0:t.name.key)||S[0]]:"",[(null==t?void 0:t.price.key)||L[0]]:null,[(null==t?void 0:t.checkIn.key)||A[0]]:"",[(null==t?void 0:t.checkOut.key)||D[0]]:"",[(null==t?void 0:t.notes.key)||P[0]]:"",[(null==t?void 0:t.link.key)||B[0]]:""}])]})},className:"w-full rounded-2xl border border-dashed border-slate-200 bg-white py-3 text-sm font-semibold text-slate-600 shadow-cardSoft transition hover:bg-slate-50",children:"宿泊を追加"}):null]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(ek,{title:"アクティビティ"}),tf?0===eX.length?(0,a.jsx)("div",{className:"rounded-2xl bg-white p-4 text-sm text-slate-500 shadow-cardSoft",children:"まだアクティビティが登録されていません。"}):(0,a.jsx)("div",{className:"space-y-3",children:eX.map((e,t)=>(0,a.jsx)(eL,{enabled:tf,onDelete:()=>to(t),children:(0,a.jsxs)("div",{className:"rounded-2xl bg-white p-4 shadow-cardSoft",children:[(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-500",children:["タイトル",(0,a.jsx)("input",{value:e.title.value,onChange:e=>ta(t,t=>({...t,title:{...t.title,value:e.target.value}})),className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]}),(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-500",children:["日時",(0,a.jsx)("input",{value:e.date.value,onChange:e=>ta(t,t=>({...t,date:{...t.date,value:e.target.value}})),placeholder:"例: 2025-11-23 10:00",className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]})]}),(0,a.jsxs)("label",{className:"mt-3 block text-xs font-semibold text-slate-500",children:["メモ",(0,a.jsx)("textarea",{value:e.notes.value,onChange:e=>ta(t,t=>({...t,notes:{...t.notes,value:e.target.value}})),rows:2,className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]}),(0,a.jsxs)("label",{className:"mt-3 block text-xs font-semibold text-slate-500",children:["予約リンク",(0,a.jsx)("input",{value:e.link.value,onChange:e=>ta(t,t=>({...t,link:{...t.link,value:e.target.value}})),placeholder:"https://...",className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]})]})},"activity-edit-".concat(t)))}):0===tw.length?(0,a.jsx)("div",{className:"rounded-2xl bg-white p-4 text-sm text-slate-500 shadow-cardSoft",children:"まだアクティビティが登録されていません。"}):(0,a.jsx)("div",{className:"space-y-3",children:tw.map((e,t)=>{let l=U(e,M)||"アクティビティ ".concat(t+1),s=_(Y(e,K)),n=U(e,P),r=U(e,B),i=r?eS(r):null;return(0,a.jsxs)("div",{className:"rounded-2xl bg-white p-4 shadow-cardSoft",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsx)("h4",{className:"text-base font-semibold text-slate-900",children:l}),s?(0,a.jsx)("span",{className:"text-xs text-slate-500",children:s}):null]}),n?(0,a.jsxs)("p",{className:"mt-2 text-xs text-slate-500",children:["メモ: ",n]}):null,i?(0,a.jsx)("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"mt-2 inline-block text-xs text-slate-900 underline underline-offset-4",children:"予約リンクを開く"}):null]},"".concat(l,"-").concat(t))})}),tf?(0,a.jsx)("button",{type:"button",onClick:()=>{eZ(e=>{let t=e[0];return[...e,...eh([{[(null==t?void 0:t.title.key)||M[0]]:"",[(null==t?void 0:t.date.key)||K[0]]:"",[(null==t?void 0:t.notes.key)||P[0]]:"",[(null==t?void 0:t.link.key)||B[0]]:""}])]})},className:"w-full rounded-2xl border border-dashed border-slate-200 bg-white py-3 text-sm font-semibold text-slate-600 shadow-cardSoft transition hover:bg-slate-50",children:"アクティビティを追加"}):null]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(ek,{title:"持ち物"}),tf?0===eQ.length?(0,a.jsx)("div",{className:"rounded-2xl bg-white p-4 text-sm text-slate-500 shadow-cardSoft",children:"まだ持ち物が登録されていません。"}):(0,a.jsx)("div",{className:"rounded-2xl bg-white p-4 shadow-cardSoft",children:(0,a.jsx)("div",{className:"space-y-3",children:eQ.map((e,t)=>(0,a.jsx)(eL,{enabled:tf,onDelete:()=>td(t),children:(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-[1fr_auto]",children:[(0,a.jsxs)("label",{className:"block text-xs font-semibold text-slate-500",children:["持ち物",(0,a.jsx)("input",{value:e.name.value,onChange:e=>ts(t,t=>({...t,name:{...t.name,value:e.target.value}})),className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-xs font-semibold text-slate-500",children:[(0,a.jsx)("input",{type:"checkbox",checked:!0===e.checked.value,onChange:e=>ts(t,t=>({...t,checked:{...t.checked,value:e.target.checked}})),className:"h-4 w-4 rounded border-slate-300"}),"準備済み"]})]})},"packing-edit-".concat(t)))})}):0===tk.length?(0,a.jsx)("div",{className:"rounded-2xl bg-white p-4 text-sm text-slate-500 shadow-cardSoft",children:"まだ持ち物が登録されていません。"}):(0,a.jsx)("div",{className:"rounded-2xl bg-white p-4 shadow-cardSoft",children:(0,a.jsx)("ul",{className:"space-y-2 text-sm",children:tk.map((e,t)=>{let l="string"==typeof e?{name:e}:e,s=U(l,H)||"持ち物 ".concat(t+1),n=J(l,O);return(0,a.jsxs)("li",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-slate-900",children:s}),(0,a.jsx)("span",{className:"text-xs text-slate-500",children:n?"準備済み":"未準備"})]},"".concat(s,"-").concat(t))})})}),tf?(0,a.jsx)("button",{type:"button",onClick:()=>{eq(e=>{let t=e[0];return[...e,...ep([{[(null==t?void 0:t.name.key)||H[0]]:"",[(null==t?void 0:t.checked.key)||O[0]]:!1}])]})},className:"w-full rounded-2xl border border-dashed border-slate-200 bg-white py-3 text-sm font-semibold text-slate-600 shadow-cardSoft transition hover:bg-slate-50",children:"持ち物を追加"}):null]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(ek,{title:"支払い履歴"}),(0,a.jsxs)("div",{className:"rounded-2xl bg-white p-4 shadow-cardSoft",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-slate-500",children:"貯金額"}),(0,a.jsx)("span",{className:"font-semibold text-slate-900",children:(0,d._z)(tv)})]}),(0,a.jsxs)("div",{className:"mt-3 flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-slate-500",children:"あと"}),(0,a.jsx)("span",{className:"font-semibold text-slate-900",children:null!==tg?(0,d._z)(tg):"—"})]}),(0,a.jsx)("div",{className:"mt-3 h-2 rounded-full bg-slate-100",children:(0,a.jsx)("div",{className:"h-2 rounded-full bg-slate-900/80",style:{width:"".concat(tj?Math.min(100,Math.round(tv/tj*100)):0,"%")}})}),tf?0===e$.length?(0,a.jsx)("div",{className:"mt-3 text-xs text-slate-500",children:"まだ貯金履歴がありません。"}):(0,a.jsx)("div",{className:"mt-3 space-y-3",children:e$.map((e,t)=>(0,a.jsx)(eL,{enabled:tf,onDelete:()=>tc(t),children:(0,a.jsxs)("div",{className:"rounded-2xl bg-white p-4 shadow-cardSoft",children:[(0,a.jsxs)("p",{className:"text-xs font-semibold text-slate-500",children:["貯金 ",t+1]}),(0,a.jsx)("input",{type:"number",inputMode:"numeric",value:e.value,onChange:e=>tn(t,t=>({...t,value:e.target.value})),className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900"})]})},"save-edit-".concat(t)))}):$.savingsHistory&&$.savingsHistory.length>0?(0,a.jsx)("div",{className:"mt-3 flex flex-wrap gap-2 text-xs text-slate-500",children:$.savingsHistory.map((e,t)=>(0,a.jsx)("span",{className:"rounded-full bg-slate-100 px-3 py-1",children:function(e){if("number"==typeof e)return(0,d._z)(e);if(e&&"object"==typeof e&&"amount"in e){let t=e.amount;return"number"==typeof t?(0,d._z)(t):"—"}return"—"}(e)},"save-".concat(t)))}):null,tf?(0,a.jsx)("button",{type:"button",onClick:()=>{e0(e=>{let t=e.some(e=>e.isObject);return[...e,...ef([t?{amount:0}:0])]})},className:"mt-4 w-full rounded-2xl border border-dashed border-slate-200 bg-white py-3 text-sm font-semibold text-slate-600 shadow-cardSoft transition hover:bg-slate-50",children:"貯金履歴を追加"}):null]})]}),tf?null:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(ek,{title:"合計費用"}),(0,a.jsx)("div",{className:"rounded-2xl bg-white px-4 shadow-cardSoft",children:(0,a.jsx)(ew,{label:"合計",value:null!==tj?(0,d._z)(tj):"—"})})]})]}):null,(0,a.jsxs)("section",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:"コメント"}),eA?(0,a.jsx)("span",{className:"text-xs text-rose-500",children:eA}):null]}),eM?(0,a.jsx)("div",{className:"rounded-2xl bg-white p-3 text-xs text-rose-500 shadow-cardSoft",children:eM}):null,(0,a.jsx)(o,{onSubmit:async e=>{if(!(null==$?void 0:$.path)){eK("プラン情報が取得できません。");return}eK(null);try{await (0,u.w)($.path,e,tx)}catch(e){eK("コメントの投稿に失敗しました。"),console.error(e)}}}),(0,a.jsx)(c,{comments:eu,onDelete:async e=>{if(!(null==$?void 0:$.path)){eK("プラン情報が取得できません。");return}eK(null);try{await (0,u.YF)($.path,e)}catch(e){eK("コメントの削除に失敗しました。"),console.error(e)}}})]})]})})}function eD(){return(0,a.jsx)(r.Z,{children:e=>(0,a.jsx)(eA,{user:e})})}},7003:function(e,t,l){"use strict";function a(e){return new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY",maximumFractionDigits:0}).format(e)}function s(e){if(!e)return null;if(e instanceof Date)return e;if("string"==typeof e){let t=new Date(e);return Number.isNaN(t.getTime())?null:t}return"toDate"in e&&"function"==typeof e.toDate?e.toDate():null}function n(e){let t=s(e);return t?new Intl.DateTimeFormat("ja-JP",{dateStyle:"medium",timeStyle:"short"}).format(t):""}function r(e){let t=s(e);return t?new Intl.DateTimeFormat("ja-JP",{dateStyle:"medium"}).format(t):""}l.d(t,{_z:function(){return a},o0:function(){return n},p6:function(){return r}})}},function(e){e.O(0,[358,139,288,537,440,971,23,744],function(){return e(e.s=102)}),_N_E=e.O()}]);